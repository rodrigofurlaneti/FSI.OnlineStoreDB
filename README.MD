# ğŸ“¦ **OnlineStore â€“ E-commerce Base Project**
### DocumentaÃ§Ã£o Oficial â€¢ README.md
Este documento apresenta a **anÃ¡lise de requisitos**, **modelagem de banco de dados**, **regras de negÃ³cio** e **estrutura inicial** do projeto **OnlineStore**, um e-commerce modular e extensÃ­vel desenvolvido com foco em clareza, escalabilidade e organizaÃ§Ã£o.

---

# ğŸ§­ **1. VisÃ£o Geral do Projeto**

O objetivo deste projeto Ã© criar uma base sÃ³lida para um sistema de e-commerce moderno, capaz de atender trÃªs tipos de clientes:

- **Visitante (Guest)** â€“ navega sem cadastro  
- **Pessoa FÃ­sica (Individual)** â€“ possui cadastro, login e CPF  
- **Pessoa JurÃ­dica (Company)** â€“ empresa com CNPJ e informaÃ§Ãµes corporativas  

O sistema suporta:

- Carrinho com persistÃªncia para visitantes e clientes cadastrados  
- PreÃ§os diferenciados por quantidade (varejo e atacado)  
- Produtos com regras flexÃ­veis de precificaÃ§Ã£o  
- Estrutura extensÃ­vel para pedidos, pagamento, logÃ­stica, promoÃ§Ãµes etc.  

---

# ğŸ“ **2. AnÃ¡lise de Requisitos**

Esta Ã© a documentaÃ§Ã£o funcional que orienta a modelagem e as decisÃµes do back-end.

---

## **2.1. Tipos de UsuÃ¡rios**

### ğŸ”¹ **Visitante (Guest)**
- NÃ£o precisa de cadastro  
- Pode navegar e adicionar produtos ao carrinho  
- Carrinho Ã© salvo usando **VisitorToken**  
- Carrinho expira apÃ³s **1 dia** sem retorno ao site  

### ğŸ”¹ **Cliente Pessoa FÃ­sica (Individual)**
- Possui cadastro com login e senha  
- Tem CPF no cadastro  
- Carrinho fica salvo sem expiraÃ§Ã£o imediata  
- Pode visualizar histÃ³rico e dados pessoais  

### ğŸ”¹ **Cliente Pessoa JurÃ­dica (Company)**
- Cadastro inclui CNPJ, razÃ£o social e nome fantasia  
- Pode ter regras especÃ­ficas como:  
  - preÃ§os diferenciados  
  - limites de crÃ©dito (futuro)  
  - relatÃ³rio corporativo  

---

## **2.2. Regras de Produto**

Cada produto pode ter **duas faixas de preÃ§o**:

| Tipo de PreÃ§o | Quantidade      | AplicaÃ§Ã£o |
|---------------|-----------------|-----------|
| Retail (varejo) | Ex.: 1 a 9 unidades | PreÃ§o padrÃ£o |
| Wholesale (atacado) | A partir de 10 unidades | PreÃ§o reduzido |

O preÃ§o aplicado Ã© recalculado **automaticamente** ao alterar a quantidade no carrinho.

---

## **2.3. Regras do Carrinho**

- O carrinho para visitantes Ã© identificado via **VisitorToken**  
- O carrinho para clientes Ã© via **CustomerId**  
- Cada item do carrinho grava o **UnitPrice no momento da compra**, garantindo histÃ³rico confiÃ¡vel  
- Sempre que a quantidade muda, o sistema busca a faixa de preÃ§o correta na tabela **ProductPrice**

---

# ğŸ§© **3. Modelo de Banco de Dados (MySQL)**  
Modelagem com nomes em **inglÃªs americano**, padronizaÃ§Ã£o clean code, 2 palavras, e relaÃ§Ãµes normalizadas.

---

## **3.1. Diagrama ER â€“ Mermaid.js**

```mermaid
erDiagram
    CUSTOMER {
        int CustomerId PK
        int CustomerTypeId FK
        string FullName
        string EmailAddress
        string PasswordHash
        string CpfNumber
        tinyint IsActive
        datetime CreatedAt
        datetime UpdatedAt
    }

    CUSTOMER_TYPE {
        int CustomerTypeId PK
        string TypeName
    }

    COMPANY_CUSTOMER {
        int CompanyCustomerId PK
        int CustomerId FK
        string CorporateName
        string TradeName
        string CnpjNumber
        string StateRegistration
        datetime CreatedAt
        datetime UpdatedAt
    }

    PRODUCT {
        int ProductId PK
        string ProductName
        string SkuCode
        decimal BasePrice
        tinyint IsActive
        datetime CreatedAt
        datetime UpdatedAt
    }

    PRODUCT_PRICE {
        int ProductPriceId PK
        int ProductId FK
        string PriceType
        int MinQuantity
        int MaxQuantity
        decimal UnitPrice
        datetime CreatedAt
        datetime UpdatedAt
    }

    SHOPPING_CART {
        int CartId PK
        int CustomerId FK
        string VisitorToken
        string CartStatus
        datetime CreatedAt
        datetime ExpiresAt
    }

    CART_ITEM {
        int CartItemId PK
        int CartId FK
        int ProductId FK
        int Quantity
        decimal UnitPrice
        datetime CreatedAt
    }

    CUSTOMER_TYPE ||--o{ CUSTOMER : "defines"
    CUSTOMER ||--|| COMPANY_CUSTOMER : "company profile"
    CUSTOMER ||--o{ SHOPPING_CART : "owns"
    SHOPPING_CART ||--o{ CART_ITEM : "contains"
    PRODUCT ||--o{ PRODUCT_PRICE : "has pricing rules"
    PRODUCT ||--o{ CART_ITEM : "added to"
```

---

# ğŸ› ï¸ **4. Scripts das Tabelas (CREATE TABLE)**

O banco foi criado em MySQL com engine **InnoDB**, suporte a chaves estrangeiras e charset **utf8mb4**.

**Tabelas do projeto:**

- CustomerType  
- Customer  
- CompanyCustomer  
- Product  
- ProductPrice  
- ShoppingCart  
- CartItem  

> ğŸ”— *Os scripts completos estÃ£o incluÃ­dos em `/database/schema.sql`.*

---

# ğŸ§ª **5. Massa de Teste (INSERTs)**

Foi criada uma massa completa com:

- 5 tipos de clientes  
- 8 clientes  
- 5 empresas PJ  
- 5 produtos  
- 10 faixas de preÃ§o  
- 5 carrinhos (visitantes + logados)  
- 6 itens de carrinho  

> ğŸ”— *ConteÃºdo completo em `/database/sample-data.sql`.*

---

# âš™ï¸ **6. Procedures (CRUD Completo)**

Cada tabela possui procedures para:

- Insert  
- Update  
- GetById  
- List  
- Delete  

Exemplo de nome:

```
Proc_Product_Insert
Proc_Product_Update
Proc_Product_ById
Proc_Product_List
Proc_Product_Delete
```

> ğŸ”— *Arquivo completo: `/database/procedures.sql`.*

---

# ğŸ” **7. RelaÃ§Ãµes Entre as Entidades**

### **CustomerType â†’ Customer**
Cada cliente tem um tipo:
- Individual  
- Company  
- Guest  
- Vip  
- Blocked  

### **Customer â†’ CompanyCustomer**
Apenas clientes do tipo "Company" possuem dados corporativos.

### **Customer / Visitor â†’ ShoppingCart**
Um carrinho pode estar vinculado a:
- Cliente logado (**CustomerId**)  
- Visitante (**VisitorToken**)  

### **ShoppingCart â†’ CartItem**
Cada carrinho pode ter vÃ¡rios itens.

### **Product â†’ ProductPrice**
Cada produto tem regras de preÃ§os por faixa de quantidade.

### **Product â†’ CartItem**
Os itens do carrinho referenciam produtos.

---

# ğŸ§± **8. ExpansÃ£o Futura**

Estrutura preparada para incluir:

- Orders (pedidos)  
- Payments (pagamentos)  
- Shipping (fretes e rastreios)  
- Inventory (controle de estoque)  
- PromoÃ§Ãµes e cupons  
- API REST com autenticaÃ§Ã£o JWT  
- Painel administrativo (backoffice)  

---

# ğŸš€ **9. Objetivo do Projeto**

Criar a **base sÃ³lida de um e-commerce** que pode crescer sem bagunÃ§a, com:

- Modelagem clara  
- Regras de negÃ³cio definidas  
- CÃ³digo limpo e padronizado  
- Escalabilidade para empresas pequenas, mÃ©dias ou grandes  

---

# ğŸ§‘â€ğŸ’» **10. Tecnologias Utilizadas**

- **MySQL 8+**  
- **Mermaid.js** (documentaÃ§Ã£o visual)  
- Arquitetura limpa e modular  
- PadrÃµes de nomes em inglÃªs americano  

---

# ğŸ“š **11. Estrutura Recomendada do RepositÃ³rio**

```
/database
   schema.sql
   sample-data.sql
   procedures.sql

/docs
   requirements.md
   er-diagram.mmd

/src
   (futuro backend ou frontend)
README.md
```

---

# ğŸŸ¢ **README Finalizado â€“ pronto para GitHub**

Obrigado por utilizar o projeto OnlineStore!
